pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
function _init()
	a = {}
	a.x = random_coord(4,43)
	a.y = random_coord(4,63)
	a.s = 1
	a.but = 4
	a.sound = {0}
	a.dcy = 2
	a.tick = 0
	a.pressed = false
	b = {}
	b.x = random_coord(44,83)
	b.y = random_coord(8,67)
	b.s = 1
	b.but = 5
	b.sound = {1}
	b.dcy = 1
	b.tick = 0
	b.pressed = false
	c = {}
	c.x = random_coord(84,123)
	c.y = random_coord(4,63)
	c.s = 1
	c.but = 2
	c.sound = {2}
	c.dcy = 1
	c.tick = 0
	c.pressed = false
	d = {}
	d.x = random_coord(4,43)
	d.y = random_coord(64,123)
	d.s = 1
	d.but = 0
	d.sound = {3}
	d.dcy = 1
	d.tick = 0
	d.pressed = false
	e = {}
	e.x = random_coord(44,83)
	e.y = random_coord(64,123)
	e.s = 1
	e.but = 3
	e.sound = {4,6}
	e.dcy = 1
	e.tick = 0
	e.pressed = false
	f = {}
	f.x = random_coord(44,83)
	f.y = random_coord(64,123)
	f.s = 1
	f.but = 1
	f.sound = {5,7}
	f.dcy = 1
	f.tick = 0
	f.pressed = false
	elements = {a,b,c,d,e,f}
	
	-- aux star coords
	aux_x = {}
	aux_y = {}
	aux_col = {}
	for i=1,100 do
		add(aux_x,random_coord(4,123))
		add(aux_y,random_coord(4,123))
		add(aux_col,flr(rnd(16)))
	end
end

function _update()
	trig()
end

function _draw()
 cls()
	aux_stars()
	draw()
end
-->8
function trig()
	for i in all(elements) do
		if (btn(i.but)) and not i.pressed then
   sfx(i.sound[random_coord(1,#i.sound)])
			i.pressed = true
			i.s += 1
		elseif i.pressed then
			if (i.s != 5) then
				if (i.tick<i.dcy) then
					i.tick += 1
				else
					i.s += 1
					i.tick = 0
				end
			else
				i.s = 1
				i.pressed = false
			end
		end
	end
end
		
function draw()
	for i in all(elements) do
		spr(i.s, i.x, i.y)
	end
end

function aux_stars()
	for i=1,(#aux_x) do
		rectfill(aux_x[i],aux_y[i],aux_x[i]+1,aux_y[i]+1,aux_col[i])
	end
end
-->8
function random_coord(l,u)
	interval = u-l+1
	r = flr(rnd(interval))
	return r+l
end

function rnd_pick(array)
	if (#array>1) then
		index = 0
		while (index==0) do
			index = flr(rnd(100)) % #array
		end
		return array[index]
	else
		return array[1]
	end
end
__gfx__
0000000000000000000070000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000077000000aa000000aa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000077770000aaaa0000aaaa0000aaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000cc00077777770aaaaaaa00aaaaaa000a99a0000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000cc000077777770aaaaaaa0aaaaaa000a99a0000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000077770000aaaa0000aaaa0000aaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000077000000aa000000aa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000070000000a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000300000907009060090600906009050090400904009040090300903009020090100901009010090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000400000e0700e0600e0600e0400e0300e0300e0300e0100e0100e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000300001507015060150401503015020150201501015010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000300001a0701a0601a0401a0301a0201a0201a0101a0101a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000300001d0701d0601d0401d0301d0201d0201d0101d0101a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000300002107021060210402103021020210202101021010220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000300002407024060240402403024020240202401024010220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
010300002607026060260402603026020260202601026010220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
